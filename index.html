<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø³Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ø°ÙƒÙŠ</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <style>
        :root {
            --bg-color: #f0f2f5;
            --primary-color: #1a2a3a;
            --gym-color: #ef4444;
            --home-color: #3b82f6;
            --work-color: #f59e0b;
            --alert-color: #f97316;
            --prayer-color: #10b981;
            --card-bg: #ffffff;
            --expense-color: #dc2626;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            background-color: #000; 
            margin: 0; 
            padding: 0; 
            display: flex; 
            justify-content: center;
            overflow-x: hidden;
        }

        .mobile-container { 
            width: 100%; 
            max-width: 450px; 
            background: var(--bg-color); 
            min-height: 100vh; 
            position: relative; 
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
            padding-bottom: 90px;
            overflow-x: hidden;
        }

        header { 
            background: var(--primary-color); 
            color: white; 
            padding: 25px 20px; 
            text-align: center; 
            font-weight: bold; 
            border-bottom-left-radius: 25px; 
            border-bottom-right-radius: 25px; 
            font-size: 1.3rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .next-alert-bar { 
            background: #fff; 
            border-right: 5px solid var(--alert-color); 
            margin: 15px 15px; 
            padding: 15px; 
            border-radius: 12px; 
            font-size: 0.85rem; 
            color: #444; 
            text-align: center; 
            font-weight: bold; 
            line-height: 1.5;
        }

        .main-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 12px; 
            padding: 15px; 
        }

        .icon-card { 
            background: var(--card-bg); 
            padding: 25px 10px; 
            border-radius: 18px; 
            text-align: center; 
            cursor: pointer; 
            box-shadow: 0 3px 10px rgba(0,0,0,0.04);
            transition: transform 0.1s;
        }

        .icon-card:active { transform: scale(0.96); }
        .icon-card svg { width: 42px; height: 42px; margin-bottom: 12px; }

        .sub-page { display: none; padding: 15px; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .back-btn { background: #e2e8f0; border: none; padding: 10px 18px; border-radius: 12px; margin-bottom: 15px; cursor: pointer; font-weight: bold; color: var(--primary-color); }

        .list-item { 
            background: white; margin-bottom: 10px; padding: 14px; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.02); width: 100%;
        }

        .list-item.done { opacity: 0.6; background: #f1f5f9; }
        .list-item.done .editable-text { text-decoration: line-through; }

        .item-index { 
            background: var(--primary-color); color: white; width: 24px; height: 24px; 
            border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; 
            font-size: 0.75rem; margin-left: 10px; flex-shrink: 0; font-weight: bold; 
        }

        .editable-text { flex-grow: 1; font-size: 0.95rem; color: #1e293b; }

        .gym-inputs-inline { display: flex; gap: 4px; margin: 0 5px; }
        .gym-inputs-inline input { width: 60px; border: 1px solid #e2e8f0; border-radius: 8px; padding: 6px 2px; font-size: 0.75rem; text-align: center; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .gym-timer-box {
            background: #1a1a1a;
            color: #fff;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 15px;
            border: 2px solid var(--gym-color);
        }
        .timer-display { font-size: 2.2rem; font-family: monospace; font-weight: bold; display: block; margin-bottom: 10px; color: var(--gym-color); }
        .timer-btns { display: flex; gap: 5px; justify-content: center; }
        .t-btn { flex: 1; padding: 8px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.8rem; }
        .start-btn { background: var(--prayer-color); color: white; }
        .stop-btn { background: #6c757d; color: white; }
        .reset-btn { background: #eee; color: #333; }

        .finance-card { background: white; padding: 15px; border-radius: 18px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 20px; text-align: center; }
        .fin-val { font-weight: 800; display: block; margin-top: 5px; font-size: 0.9rem; }

        .selected-time-display { background: #1e293b; color: #10b981; padding: 20px; border-radius: 18px; text-align: center; font-family: 'Courier New', monospace; margin-bottom: 20px; border: 2px solid #334155; }
        .time-digits { font-size: 2.8rem; display: block; letter-spacing: 2px; }

        .info-box { background: white; padding: 15px; border-radius: 15px; margin-bottom: 20px; border-right: 6px solid var(--gym-color); }
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f1f5f9; align-items: center; }
        .info-row:last-child { border-bottom: none; }
        .info-row input { border: none; text-align: left; font-weight: bold; color: var(--gym-color); width: 50%; outline: none; background: transparent; font-size: 1rem; }

        .btn-main { width: 100%; padding: 16px; border: none; border-radius: 14px; background: var(--primary-color); color: white; font-weight: bold; cursor: pointer; margin-bottom: 10px; font-size: 1rem; }

        .tabs-container { display: flex; gap: 8px; margin: 15px 0; }
        .tab-btn { flex: 1; padding: 12px 5px; background: #fff; text-align: center; border-radius: 10px; cursor: pointer; font-weight: bold; border: 1px solid #e2e8f0; font-size: 0.85rem; }
        .tab-btn.gym-active { background: var(--gym-color); color: white; border-color: var(--gym-color); }
        .tab-btn.active { background: var(--prayer-color); color: white; border-color: var(--prayer-color); }

        input[type="text"], input[type="number"], input[type="date"], input[type="datetime-local"] { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #d1d5db; margin-bottom: 10px; font-size: 1rem; -webkit-appearance: none; }
        
        .footer-tools { position: fixed; bottom: 0; width: 100%; max-width: 450px; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); padding: 12px; display: flex; justify-content: space-around; border-top: 1px solid #e2e8f0; }
        .tool-btn { border: none; background: #f1f5f9; color: #475569; padding: 8px 15px; border-radius: 8px; font-size: 0.75rem; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="mobile-container">
    <header>Ù…Ø³Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ø°ÙƒÙŠ</header>

    <div class="next-alert-bar" id="next-alert-info">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¯Ù…Ø©</div>

    <div id="main-menu" class="main-grid">
        <div class="icon-card" onclick="openPage('gym-page')">
            <svg viewBox="0 0 24 24" fill="var(--gym-color)"><path d="M20.57,14.86L22,13.43L20.57,12L17,15.57L8.43,7L12,3.43L10.57,2L9.14,3.43L7.71,2L5.57,4.14L4.14,2.71L2.71,4.14L4.14,5.57L2,7.71L3.43,9.14L2,10.57L3.43,12L7,8.43L15.57,17L12,20.57L13.43,22L14.86,20.57L16.29,22L18.43,19.86L19.86,21.29L21.29,19.86L19.86,18.43L22,16.29L20.57,14.86Z"/></svg>
            <br>Ø§Ù„Ø¬ÙŠÙ…
        </div>
        <div class="icon-card" onclick="openPage('home-page')">
            <svg viewBox="0 0 24 24" fill="var(--home-color)"><path d="M14,10H19.5L14,4.5V10M5,3H15L21,9V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3M5,5V19H19V12H12V5H5Z"/></svg>
            <br>Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙŠ
        </div>
        <div class="icon-card" onclick="openPage('work-page')">
            <svg viewBox="0 0 24 24" fill="var(--work-color)"><path d="M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.89 10,8V16A2,2 0 0,0 12,18H21M12,16H22V8H12V16M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z"/></svg>
            <br>Ø§Ù„Ù…Ø§Ù„ÙŠØ©
        </div>
        <div class="icon-card" onclick="openPage('alert-page')">
            <svg viewBox="0 0 24 24" fill="var(--alert-color)"><path d="M12,2A3,3 0 0,0 9,5V5.29C6.14,6.09 4,8.7 4,11.82V17.82L2,19.82V20.82H22V19.82L20,17.82V11.82C20,8.7 17.86,6.09 15,5.29V5A3,3 0 0,0 12,2M10,21.82C10,22.92 10.9,23.82 12,23.82C13.1,23.82 14,22.92 14,21.82H10Z"/></svg>
            <br>Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
        </div>
        <div class="icon-card" onclick="openPage('prayer-page')" style="grid-column: span 2;">
            <svg viewBox="0 0 24 24" fill="var(--prayer-color)"><path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/></svg>
            <br>Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ø£Ø¯Ø¹ÙŠØ©
        </div>
    </div>

    <div id="gym-page" class="sub-page">
        <button class="back-btn" onclick="closePage()">Ø±Ø¬ÙˆØ¹</button>
        
        <div class="gym-timer-box">
            <span class="timer-display" id="gym-stopwatch">00:00:00</span>
            <div class="timer-btns">
                <button class="t-btn start-btn" onclick="startTimer()">Ø§Ø¨Ø¯Ø£</button>
                <button class="t-btn stop-btn" onclick="stopTimer()">Ø¥ÙŠÙ‚Ø§Ù</button>
                <button class="t-btn reset-btn" onclick="resetTimer()">Ø¥Ø¹Ø§Ø¯Ø©</button>
            </div>
        </div>

        <div class="info-box" id="gym-info-area">
            <div class="info-row">Ø§Ù„ÙˆØ²Ù†: <input type="text" id="gym-weight" oninput="saveGymInfo()"></div>
            <div class="info-row">Ø§Ù„Ø·ÙˆÙ„: <input type="text" id="gym-height" oninput="saveGymInfo()"></div>
            <div class="info-row">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡: <input type="date" id="gym-start" oninput="saveGymInfo()"></div>
            <div class="info-row">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: <input type="date" id="gym-end" oninput="saveGymInfo()"></div>
        </div>
        <div class="tabs-container">
            <div class="tab-btn gym-active gym-t" onclick="setGymDay(1)">Ø§Ù„ÙŠÙˆÙ… 1</div>
            <div class="tab-btn gym-t" onclick="setGymDay(2)">Ø§Ù„ÙŠÙˆÙ… 2</div>
            <div class="tab-btn gym-t" onclick="setGymDay(3)">Ø§Ù„ÙŠÙˆÙ… 3</div>
        </div>
        <div id="gym-list-1" class="gym-list-div"></div>
        <div id="gym-list-2" class="gym-list-div" style="display:none"></div>
        <div id="gym-list-3" class="gym-list-div" style="display:none"></div>
        <input type="text" id="gym-in" placeholder="Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†...">
        <button class="btn-main" style="background:var(--gym-color); margin-top:10px;" onclick="addGymExercise()">Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ†</button>
    </div>

    <div id="work-page" class="sub-page">
        <button class="back-btn" onclick="closePage()">Ø±Ø¬ÙˆØ¹</button>
        <div class="finance-card">
            <div><span>Ø§Ù„Ø±Ø§ØªØ¨</span><span class="fin-val" id="disp-salary">0</span></div>
            <div><span>Ù…ØµØ§Ø±ÙŠÙ</span><span class="fin-val" style="color:red" id="disp-expenses">0</span></div>
            <div><span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</span><span class="fin-val" style="color:green" id="disp-balance">0</span></div>
        </div>
        <input type="number" id="in-salary" placeholder="Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø§ØªØ¨">
        <button class="btn-main" onclick="updateFin('salary')">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§ØªØ¨</button>
        <input type="text" id="in-expenses" placeholder="Ø®ØµÙ… Ù…ØµØ§Ø±ÙŠÙ (5000+2000)">
        <button class="btn-main" style="background:var(--expense-color)" onclick="updateFin('expense')">Ø®ØµÙ… Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</button>
        <div style="display:flex; gap:10px;">
            <button class="btn-main" style="background:#6c757d; flex:1" onclick="clearFin('salary')">ØªØµÙÙŠØ± Ø§Ù„Ø±Ø§ØªØ¨</button>
            <button class="btn-main" style="background:#6c757d; flex:1" onclick="clearFin('expense')">ØªØµÙÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</button>
        </div>
    </div>

    <div id="alert-page" class="sub-page">
        <button class="back-btn" onclick="closePage()">Ø±Ø¬ÙˆØ¹</button>
        <div class="selected-time-display">
            <span class="time-digits" id="digi-time">--:--</span>
            <span id="digi-period" style="display:block; margin-top:5px;">Ø¥Ø®ØªØ± Ù…ÙˆØ¹Ø¯Ø§Ù‹</span>
        </div>
        <input type="datetime-local" id="al-t" onchange="formatDigitalTime(this.value)">
        <input type="text" id="al-txt" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡...">
        <button class="btn-main" style="background:var(--alert-color)" onclick="addAlert()">Ø­ÙØ¸ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</button>
        <div id="al-list-container"></div>
    </div>

    <div id="home-page" class="sub-page">
        <button class="back-btn" onclick="closePage()">Ø±Ø¬ÙˆØ¹</button>
        <div id="h-list"></div>
        <input id="h-in" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©...">
        <button class="btn-main" onclick="addItem('h-list','h-in','notes')">Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø©</button>
    </div>

    <div id="prayer-page" class="sub-page">
        <button class="back-btn" onclick="closePage()">Ø±Ø¬ÙˆØ¹</button>
        <div class="tabs-container">
            <div class="tab-btn active p-t" onclick="setPrayerCat('ad')">Ø£Ø¯Ø¹ÙŠØ©</div>
            <div class="tab-btn p-t" onclick="setPrayerCat('az')">Ø£Ø°ÙƒØ§Ø±</div>
        </div>
        <div id="list-ad" class="p-list-div"></div>
        <div id="list-az" class="p-list-div" style="display:none"></div>
        <input type="text" id="p-in" placeholder="Ù†Øµ Ø¬Ø¯ÙŠØ¯...">
        <button class="btn-main" style="background:var(--prayer-color)" onclick="addPrayer()">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </div>

    <div class="footer-tools">
        <button class="tool-btn" onclick="exportData()">Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        <button class="tool-btn" onclick="importData()">Ø§Ø³ØªØ¹Ø§Ø¯Ø©</button>
    </div>
</div>

<script>
    let alertsArray = JSON.parse(localStorage.getItem('my_alerts')) || [];
    let finSalary = parseFloat(localStorage.getItem('fin_salary')) || 0;
    let finExpenses = parseFloat(localStorage.getItem('fin_expenses')) || 0;
    let notesArray = JSON.parse(localStorage.getItem('my_notes')) || [];
    let gymExercises = JSON.parse(localStorage.getItem('gym_ex_offline_v1')) || { 1:[], 2:[], 3:[] };
    let prayerData = JSON.parse(localStorage.getItem('prayer_list')) || { ad:[], az:[] };
    let doneStatus = JSON.parse(localStorage.getItem('done_items')) || {};
    let currentGymDay = 1, currentPrayerCat = 'ad';

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø¤Ù‚Øª
    let timerInterval;
    let timerSeconds = 0;

    window.onload = function() { loadGymInfo(); refreshAllLists(); updateFinanceUI(); setInterval(updateBar, 1000); };

    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¤Ù‚Øª
    function startTimer() {
        if (timerInterval) return;
        timerInterval = setInterval(() => {
            timerSeconds++;
            let h = Math.floor(timerSeconds / 3600).toString().padStart(2, '0');
            let m = Math.floor((timerSeconds % 3600) / 60).toString().padStart(2, '0');
            let s = (timerSeconds % 60).toString().padStart(2, '0');
            document.getElementById('gym-stopwatch').innerText = `${h}:${m}:${s}`;
        }, 1000);
    }
    function stopTimer() { clearInterval(timerInterval); timerInterval = null; }
    function resetTimer() { stopTimer(); timerSeconds = 0; document.getElementById('gym-stopwatch').innerText = "00:00:00"; }

    function saveAll() {
        localStorage.setItem('fin_salary', finSalary); localStorage.setItem('fin_expenses', finExpenses);
        localStorage.setItem('my_notes', JSON.stringify(notesArray)); localStorage.setItem('gym_ex_offline_v1', JSON.stringify(gymExercises));
        localStorage.setItem('prayer_list', JSON.stringify(prayerData)); localStorage.setItem('my_alerts', JSON.stringify(alertsArray));
        localStorage.setItem('done_items', JSON.stringify(doneStatus));
    }

    function updateFinanceUI() {
        document.getElementById('disp-salary').innerText = finSalary.toLocaleString();
        document.getElementById('disp-expenses').innerText = finExpenses.toLocaleString();
        document.getElementById('disp-balance').innerText = (finSalary - finExpenses).toLocaleString();
    }

    function updateFin(type) {
        let valInput = document.getElementById(type==='salary'?'in-salary':'in-expenses').value;
        let val = 0; try { val = eval(valInput.replace(/[^-+*/0-9.]/g, '')) || 0; } catch { val = parseFloat(valInput) || 0; }
        if(type==='salary') finSalary = val; else finExpenses += val;
        saveAll(); updateFinanceUI(); document.getElementById(type==='salary'?'in-salary':'in-expenses').value='';
    }
    function clearFin(type) { if(type==='salary') finSalary=0; else finExpenses=0; saveAll(); updateFinanceUI(); }

    function updateBar() {
        let bar = document.getElementById('next-alert-info');
        let now = new Date().getTime();
        let future = alertsArray.filter(a => new Date(a.time).getTime() > now).sort((a,b) => new Date(a.time) - new Date(b.time));
        if(future.length > 0) {
            let next = future[0], nextDate = new Date(next.time);
            let diff = nextDate.getTime() - now;
            let h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
            bar.innerHTML = `ğŸ”” ${next.text} - ${nextDate.toLocaleDateString('ar-EG')} (${nextDate.toLocaleTimeString('ar-EG', {hour:'2-digit', minute:'2-digit'})}) <br> <small>Ù…ØªØ¨Ù‚ÙŠ: ${h}:${m}:${s}</small>`;
        } else bar.innerHTML = 'ğŸ•’ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ø¯Ù…Ø©';
    }

    function formatDigitalTime(v) { 
        let d = new Date(v); let h = d.getHours(), m = d.getMinutes().toString().padStart(2, '0');
        let p = h >= 12 ? 'Ù…Ø³Ø§Ø¡Ù‹' : 'ØµØ¨Ø§Ø­Ø§Ù‹', h12 = h % 12 || 12;
        document.getElementById('digi-time').innerText = `${h12}:${m}`;
        document.getElementById('digi-period').innerText = p + " - " + d.toLocaleDateString();
    }

    function renderList(lid, arr, type, sub) {
        let l = document.getElementById(lid); l.innerHTML = '';
        arr.forEach((item, idx) => {
            let itemKey = `${type}-${sub}-${idx}`;
            let d = document.createElement('div'); 
            d.className = `list-item ${doneStatus[itemKey] ? 'done' : ''}`;
            let isGym = (type === 'gym');
            let gymInputs = isGym ? `<div class="gym-inputs-inline">
                <input type="text" placeholder="ØªÙƒØ±Ø§Ø±" value="${item.reps || ''}" oninput="updateGymVal(${sub}, ${idx}, 'reps', this.value)">
                <input type="text" placeholder="ÙˆØ²Ù†" value="${item.weight || ''}" oninput="updateGymVal(${sub}, ${idx}, 'weight', this.value)">
            </div>` : '';
            d.innerHTML = `<span class="item-index">${idx+1}</span><span class="editable-text" onclick="toggleDone('${itemKey}')">${isGym?item.text:item}</span>${gymInputs}
                <div style="display:flex; gap:10px;"><span style="color:blue; cursor:pointer; font-size:0.8rem" onclick="editItem('${type}', ${idx}, '${sub}')">ØªØ¹Ø¯ÙŠÙ„</span><span style="color:red; cursor:pointer; font-size:0.8rem" onclick="deleteItem('${type}', ${idx}, '${sub}')">Ø­Ø°Ù</span></div>`;
            l.appendChild(d);
        });
    }

    function updateGymVal(day, idx, f, v) { gymExercises[day][idx][f] = v; saveAll(); }
    function addGymExercise() { let txt = document.getElementById('gym-in').value; if(txt){ gymExercises[currentGymDay].push({text:txt, reps:'', weight:''}); saveAll(); refreshAllLists(); document.getElementById('gym-in').value=''; } }
    function toggleDone(key) { doneStatus[key] = !doneStatus[key]; saveAll(); refreshAllLists(); }
    function refreshAllLists() {
        renderList('h-list', notesArray, 'notes'); renderList('gym-list-1', gymExercises[1], 'gym', 1);
        renderList('gym-list-2', gymExercises[2], 'gym', 2); renderList('gym-list-3', gymExercises[3], 'gym', 3);
        renderList('list-ad', prayerData.ad, 'prayer', 'ad'); renderList('list-az', prayerData.az, 'prayer', 'az'); renderAlerts();
    }
    function addAlert() { let t = document.getElementById('al-t').value, txt = document.getElementById('al-txt').value; if(t && txt){ alertsArray.push({id:Date.now(), time:t, text:txt}); saveAll(); renderAlerts(); } }
    function renderAlerts() {
        let c = document.getElementById('al-list-container'); c.innerHTML = "";
        alertsArray.sort((a,b)=>new Date(a.time)-new Date(b.time)).forEach((al, idx) => {
            c.innerHTML += `<div class="list-item"><span class="item-index">${idx+1}</span><div style="flex:1"><b>${al.text}</b><br><small>${al.time.replace('T',' ')}</small></div><span style="color:red" onclick="deleteAlert(${al.id})">Ø­Ø°Ù</span></div>`;
        });
    }
    function deleteAlert(id) { alertsArray = alertsArray.filter(a=>a.id!==id); saveAll(); renderAlerts(); }
    function saveGymInfo() { localStorage.setItem('gym_info_offline', JSON.stringify({w:document.getElementById('gym-weight').value, h:document.getElementById('gym-height').value, s:document.getElementById('gym-start').value, e:document.getElementById('gym-end').value})); }
    function loadGymInfo() { let gi = JSON.parse(localStorage.getItem('gym_info_offline')); if(gi){ document.getElementById('gym-weight').value=gi.w||''; document.getElementById('gym-height').value=gi.h||''; document.getElementById('gym-start').value=gi.s||''; document.getElementById('gym-end').value=gi.e||''; } }
    function addItem(lid, iid, type, sub) { let inp=document.getElementById(iid); if(inp.value){ if(type==='notes') notesArray.push(inp.value); else prayerData[sub].push(inp.value); saveAll(); refreshAllLists(); inp.value=''; } }
    function deleteItem(type, idx, sub) { if(confirm("Ø­Ø°ÙØŸ")){ if(type==='notes') notesArray.splice(idx,1); else if(type==='gym') gymExercises[sub].splice(idx,1); else prayerData[sub].splice(idx,1); saveAll(); refreshAllLists(); } }
    function editItem(type, idx, sub) { let cur = type==='gym'?gymExercises[sub][idx].text : type==='prayer'?prayerData[sub][idx] : notesArray[idx]; let n = prompt("ØªØ¹Ø¯ÙŠÙ„:", cur); if(n){ if(type==='notes') notesArray[idx]=n; else if(type==='gym') gymExercises[sub][idx].text=n; else prayerData[sub][idx]=n; saveAll(); refreshAllLists(); } }
    function addPrayer() { addItem(`list-${currentPrayerCat}`, 'p-in', 'prayer', currentPrayerCat); }
    function setGymDay(day) { currentGymDay=day; document.querySelectorAll('.gym-t').forEach((b,i)=>b.classList.toggle('gym-active', i+1===day)); document.querySelectorAll('.gym-list-div').forEach((l,i)=>l.style.display=i+1===day?'block':'none'); }
    function setPrayerCat(cat) { currentPrayerCat=cat; document.querySelectorAll('.p-t').forEach(b=>b.classList.toggle('active', b.getAttribute('onclick').includes(cat))); document.querySelectorAll('.p-list-div').forEach(d=>d.style.display=d.id==='list-'+cat?'block':'none'); }
    function openPage(id) { document.querySelectorAll('.sub-page').forEach(p=>p.style.display='none'); document.getElementById('main-menu').style.display='none'; document.getElementById(id).style.display='block'; window.scrollTo(0,0); }
    function closePage() { document.getElementById('main-menu').style.display='grid'; document.querySelectorAll('.sub-page').forEach(p=>p.style.display='none'); }
    function exportData() { alert(JSON.stringify(localStorage)); }
    function importData() { let d=prompt("Ø£Ù„ØµÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:"); if(d){ let j=JSON.parse(d); Object.keys(j).forEach(k=>localStorage.setItem(k, j[k])); location.reload(); } }
</script>

</body>
</html>